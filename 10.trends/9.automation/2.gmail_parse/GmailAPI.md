# Gmail API 키 발급 및 설정 방법

## 1. 구글 클라우드 프로젝트 만들기

1.  [Google Cloud Console](https://console.cloud.google.com/) 접속 →
    로그인
2.  상단의 프로젝트 선택 → **새 프로젝트 만들기**
3.  프로젝트 이름 입력 후 **만들기** 클릭

------------------------------------------------------------------------

## 2. Gmail API 활성화

1.  새 프로젝트가 선택된 상태에서 → 왼쪽 메뉴 **API 및 서비스 \>
    라이브러리**
2.  `Gmail API` 검색 후 선택
3.  **사용** 버튼 클릭 (Enable)

------------------------------------------------------------------------

## 3. OAuth 동의 화면 구성

1.  **API 및 서비스 \> OAuth 동의 화면** 이동
2.  사용자 유형 선택:
    -   개인/테스트 목적이면 **외부(External)** 선택\
3.  앱 이름, 이메일 주소 등 필수 항목 입력
4.  "범위(Scopes)"에서 → Gmail API 권한(`.../auth/gmail.readonly`,
    `.../auth/gmail.send`) 추가
5.  테스트 사용자 → 본인 Gmail 계정 추가
6.  저장 후 완료

------------------------------------------------------------------------

## 4. OAuth 클라이언트 ID 만들기

1.  **API 및 서비스 \> 사용자 인증 정보** 메뉴
2.  **사용자 인증 정보 만들기 \> OAuth 클라이언트 ID**
3.  애플리케이션 유형:
    -   보통 **데스크톱 앱** 또는 **웹 애플리케이션** 선택
4.  이름 입력 → 만들기
5.  생성 후 `credentials.json` 파일 다운로드

이 파일이 바로 Gmail API를 사용할 때 필요한 **클라이언트 키**입니다.

------------------------------------------------------------------------

## 5. 코드에서 사용

-   다운로드 받은 `credentials.json`을 프로젝트 루트에 저장

-   Python 코드에서

    ``` python
    from google_auth_oauthlib.flow import InstalledAppFlow
    flow = InstalledAppFlow.from_client_secrets_file("credentials.json", SCOPES)
    ```

-   최초 실행 시 브라우저 인증이 뜨고, 승인하면 `token.json`이 자동
    저장됩니다.

------------------------------------------------------------------------

## 📌 정리

-   **credentials.json**: 앱을 구글에 등록했을 때 발급받는 **클라이언트
    키**\
-   **token.json**: 사용자가 실제 로그인/승인 후 생성되는 **엑세스
    토큰** (자동 생성/갱신됨)\
-   메일 **읽기/쓰기**를 하려면 OAuth 동의 화면에서
    -   `https://www.googleapis.com/auth/gmail.send`\
    -   `https://www.googleapis.com/auth/gmail.readonly`\
        등의 범위를 추가해야 합니다.
